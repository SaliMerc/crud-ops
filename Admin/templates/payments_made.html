}{% extends 'base.html' %} {% load static %} {% block content %}
<main class="col-md-9 ms-sm-auto col-lg-10 content">
  <h2>All Payments</h2>
  <p>All Payments made are shown here</p>

  <div class="card mt-4">
    <div class="card-body">
      <div class="search-container">
        <form method="GET" action="">
          <div class="input-group">
            <input
              type="text"
              name="q"
              class="form-control"
              placeholder="Search by customer name, transaction status, customer phone number, or transaction code"
              value="{{ request.GET.q|default:'' }}"
            />
            <button type="submit" class="btn btn-success">
              <i class="fas fa-search"></i> Search
            </button>
            {% if request.GET.q %}
            <a href="{% url 'payments_made' %}" class="btn btn-secondary"
              >Clear</a
            >
            {% endif %}
          </div>
        </form>
      </div>

      <table class="table table-hover">
        <thead class="table-dark">
          <tr>
            <th>#</th>
            <th>Customer Name</th>
            <th>Customer Phone Number</th>
            <th>Transaction Status</th>
            <th>Transaction Code</th>
            <th>Transaction Date</th>
          </tr>
        </thead>
        <tbody>
          {% for transaction in transactions %}
          <tr>
            <td>{{forloop.counter}}</td>
            <td>{{transaction.customer_name}}</td>
            <td>{{transaction.customer_phone_number}}</td>
            <td>{{transaction.transaction_status}}</td>
            <td>{{transaction.transaction_code}}</td>
            <td>{{transaction.transaction_date}}</td>
            {% empty %}
            <td colspan="5" class="text-left">No payments to show...</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</main>

{% endblock %}
